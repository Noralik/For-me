<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Elden Stats ‚Äî –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —É—Ä–æ–≤–Ω–µ–π</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="wrap">
    <header class="header">
      <h1 class="title">Elden Stats</h1>
      <p class="subtitle">–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —É—Ä–æ–≤–Ω–µ–π –¥–ª—è –ø—Ä–æ–∫–∞—á–∫–∏</p>
    </header>

    <main class="card">
      <div class="controls">
        <button id="btn-random" class="btn">üé≤ –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å</button>
        <button id="btn-reset" class="btn btn-ghost">‚Ü∫ –°–±—Ä–æ—Å–∏—Ç—å</button>
        <div class="total">
          <span>–°—É–º–º–∞ —É—Ä–æ–≤–Ω–µ–π:</span>
          <strong id="total">0</strong>
        </div>
      </div>

      <div class="stats-grid" id="stats-grid">
        <!-- –®–∞–±–ª–æ–Ω —Å—Ç—Ä–æ–∫–∏ —Å—Ç–∞—Ç–æ–≤ -->
        <!-- –ö–∞–∂–¥–∞—è —Å—Ç—Ä–æ–∫–∞ —Å–æ–∑–¥–∞—ë—Ç—Å—è –∏–∑ JS; –≤–æ—Ç —Å–ø–∏—Å–æ–∫ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: -->
      </div>

      <footer class="hint">
        –ü–æ–¥—Å–∫–∞–∑–∫–∞: –º–µ–Ω—è–π –∑–Ω–∞—á–µ–Ω–∏—è —Å–ø—Ä–∞–≤–∞ (0‚Äì99). –ü–æ–ª–æ—Å—ã –∏ —Å—É–º–º–∞ –æ–±–Ω–æ–≤—è—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.
      </footer>
    </main>

    <footer class="footer">
      <span>–°—Ç–∏–ª–∏ –≤–¥–æ—Ö–Ω–æ–≤–ª–µ–Ω—ã —ç—Å—Ç–µ—Ç–∏–∫–æ–π Elden Ring ¬∑ –°–¥–µ–ª–∞–Ω–æ –¥–ª—è —Ç–µ–±—è üíõ</span>
    </footer>
  </div>

  <script>
    // ---- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å—Ç–∞—Ç–æ–≤ (–ø–æ—Ä—è–¥–æ–∫ –∫–∞–∫ –≤ Elden Ring) ----
    const DEFAULT_STATS = [
      { key: 'vigor',        name: '–ñ–∏–≤—É—á–µ—Å—Ç—å',     value: 20 },
      { key: 'mind',         name: '–°–æ—Å—Ä–µ–¥–æ—Ç–æ—á.',   value: 15 },
      { key: 'endurance',    name: '–í—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç—å',  value: 18 },
      { key: 'strength',     name: '–°–∏–ª–∞',          value: 4  }, // –∫–∞–∫ –ø—Ä–æ—Å–∏–ª–∏
      { key: 'dexterity',    name: '–õ–æ–≤–∫–æ—Å—Ç—å',      value: 12 },
      { key: 'intelligence', name: '–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç',     value: 34 }, // –∫–∞–∫ –ø—Ä–æ—Å–∏–ª–∏
      { key: 'faith',        name: '–í–µ—Ä–∞',          value: 10 },
      { key: 'arcane',       name: '–¢–∞–π–Ω–æ–∑–Ω–∞–Ω–∏–µ',   value: 9  },
    ];

    // ---- –°–æ–∑–¥–∞–Ω–∏–µ DOM —Å—Ç—Ä–æ–∫ –¥–ª—è —Å—Ç–∞—Ç–æ–≤ ----
    const grid = document.getElementById('stats-grid');

    function createStatRow(stat) {
      const row = document.createElement('div');
      row.className = 'stat-row';
      row.dataset.key = stat.key;

      row.innerHTML = `
        <div class="stat-name">${stat.name}</div>
        <div class="bar">
          <div class="fill" style="width:${clamp(stat.value)}%"></div>
          <div class="ticks"></div>
        </div>
        <div class="input-wrap">
          <input type="number" min="0" max="99" step="1" class="num"
                 value="${clamp(stat.value)}" aria-label="${stat.name}">
        </div>
      `;

      // –ù–∞—Ä–∏—Å—É–µ–º "—Ç–∏–∫–æ–≤—ã–µ" –æ—Ç–º–µ—Ç–∫–∏ –∫–∞–∂–¥—ã–µ 10
      const ticks = row.querySelector('.ticks');
      for (let i = 10; i < 100; i += 10) {
        const t = document.createElement('span');
        t.style.left = i + '%';
        ticks.appendChild(t);
      }

      // –°–ª—É—à–∞—Ç–µ–ª—å –≤–≤–æ–¥–∞
      const input = row.querySelector('input.num');
      input.addEventListener('input', () => {
        const v = clamp(input.value);
        input.value = v;
        row.querySelector('.fill').style.width = v + '%';
        updateTotal();
      });

      return row;
    }

    // ---- –£—Ç–∏–ª–∏—Ç—ã ----
    function clamp(v) {
      v = parseInt(v, 10);
      if (Number.isNaN(v)) v = 0;
      return Math.max(0, Math.min(99, v));
    }

    function readStats() {
      return Array.from(document.querySelectorAll('.stat-row')).map(row => {
        const key = row.dataset.key;
        const name = row.querySelector('.stat-name').textContent.trim();
        const value = clamp(row.querySelector('input.num').value);
        return { key, name, value };
      });
    }

    function writeStats(stats) {
      // –æ–±–Ω–æ–≤–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –∏ –ø–æ–ª–æ—Å—ã
      stats.forEach(s => {
        const row = document.querySelector(`.stat-row[data-key="${s.key}"]`);
        if (!row) return;
        const input = row.querySelector('input.num');
        input.value = clamp(s.value);
        row.querySelector('.fill').style.width = clamp(s.value) + '%';
      });
      updateTotal();
    }

    function updateTotal() {
      const stats = readStats();
      const sum = stats.reduce((a, s) => a + s.value, 0);
      const total = document.getElementById('total');
      total.textContent = sum;
      total.classList.remove('pulse');
      // –Ω–µ–±–æ–ª—å—à–∞—è –∞–Ω–∏–º–∞—Ü–∏—è
      requestAnimationFrame(() => {
        requestAnimationFrame(() => total.classList.add('pulse'));
      });
    }

    function randomizeStats() {
      const stats = readStats().map(s => ({
        ...s,
        value: Math.floor(Math.random() * 100) // 0‚Äì99
      }));
      writeStats(stats);
    }

    function resetStats() {
      writeStats(DEFAULT_STATS);
    }

    // ---- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è ----
    function init() {
      // –ø–æ—Å—Ç—Ä–æ–∏—Ç—å —Å—Ç—Ä–æ–∫–∏
      DEFAULT_STATS.forEach(stat => grid.appendChild(createStatRow(stat)));

      // –∫–Ω–æ–ø–∫–∏
      document.getElementById('btn-random').addEventListener('click', randomizeStats);
      document.getElementById('btn-reset').addEventListener('click', resetStats);

      // —Å—Ç–∞—Ä—Ç–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (–≤–∫–ª—é—á–∞—è –°–∏–ª–∞ 4, –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç 34)
      resetStats();
    }

    init();
  </script>
</body>
</html>
